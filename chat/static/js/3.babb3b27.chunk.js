(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{19:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){n(e,t,a[t])})}return e}a.d(t,"a",function(){return r})},20:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n={events:{link:[{"@href":"https://{domain}/api/account/{accountId}/chat/{chatId}/events","@rel":"self"},{"@href":"https://{domain}/api/account/{accountId}/chat/{chatId}/events?from=5","@rel":"next"}],event:[{"@id":"0","@type":"state",time:"2017-02-27T06:30:00.695-05:00",state:"waiting"},{"@id":"1","@type":"line",time:"2017-02-27T06:30:00.696-05:00",textType:"plain",text:"Thank you for choosing to chat with us.",by:"info",source:"system",systemMessageId:"4",subType:"REGULAR"},{"@id":"2","@type":"state",time:"2017-02-27T06:30:25.502-05:00",state:"chatting"},{"@id":"3","@type":"line",time:"2017-02-27T06:30:25.502-05:00",textType:"plain",text:"You are now chatting with Natalie.",by:"info",source:"system",systemMessageId:"3",subType:"REGULAR"},{"@id":"4","@type":"line",time:"2017-02-27T06:30:31.655-05:00",textType:"html",text:'<div dir="ltr" style="direction: ltr; text-align: left;">hi</div>',by:"Natalie",source:"agent",subType:"REGULAR"}]}},r={survey:{id:361348,title:"",header:"",questions:{question:[{type:"Radio Button",validationType:"alpha_numeric",id:4991315,logicId:1,order:0,mandatory:!1,label:"Would you like us to email you a transcript of this chat?",entry:[{checked:!1,value:"yes",displayValue:"Yes"},{checked:!1,value:"no",displayValue:"No"}]},{type:"Text Field",validationType:"email",id:4991311,logicId:2,order:1,mandatory:!1,label:"If yes, please provide your email:",lastKnownValue:""}]}}}},27:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(2),l=a(3),i=a(5),o=a(4),s=a(6),c=a(0),u=a.n(c),d=(a(27),a(20)),m=a(1);function f(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var b=function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,s=new Array(l),c=0;c<l;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={retrieveExitSurveyStructure:d.b,isFormValid:!1,sendTranscript:!0,email:{value:"",type:"email",name:"email",label:"Email *",placeholder:"Enter text here",errorMessage:"Enter a valid email address. Format: you@domain.com",valid:!1,dirty:!1},isHelpful:"Yes",textarea:""},a.onChangeHandler=function(e){var t=e.target,r=t.value,l=t.name,i=Object(n.a)({},a.state);switch(l){case"group1":r===a.state.retrieveExitSurveyStructure.survey.questions.question[0].entry[0].value?i.sendTranscript=!0:i.sendTranscript=!1;break;case"email":i.email.valid=f(r),i.email.dirty=""!==r&&f(r),i.email.value=r;break;case"group2":i.isHelpful=r;break;case"textarea":i.textarea=r}i.isFormValid=i.email.valid,a.setState(function(){return i})},a.onBlurHandler=function(e){var t=Object(n.a)({},a.state);t.email.dirty=""!==e.target.value,a.setState(function(){return t})},a.onFocusHandler=function(e){var t=Object(n.a)({},a.state);t.email.dirty=!1,a.setState(function(){return t})},a.handlerSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.isHelpful,l=t.textarea,i={email:n.value,isHelpful:r,message:l};console.log("dataFromFeedbackForm ---\x3e ",i),setTimeout(function(){a.props.closeChatWindow()},1500)},a.closeChatWindow=function(){a.props.closeChatWindow()},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Object(m.e)().then(function(e){return console.log("getExitSurveyStructure",e)})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.textarea,n=e.sendTranscript,r=e.isHelpful,l=e.isFormValid,i=e.retrieveExitSurveyStructure.survey.questions.question;return u.a.createElement("div",{className:"feedback"},u.a.createElement("div",{className:"feedback-title"},"Thank you for interest in Viking Cruises."),u.a.createElement("form",{onSubmit:this.handlerSubmit,className:"feedback-form"},u.a.createElement("fieldset",{className:"feedback-form-fieldset",style:{order:i[0].order}},u.a.createElement("div",{className:"feedback-form-text"},i[0].label),u.a.createElement("label",{className:"feedback-form-radioLabel"},u.a.createElement("input",{type:"radio",name:"group1",value:i[0].entry[0].value,checked:!0===n,onChange:this.onChangeHandler}),i[0].entry[0].displayValue),u.a.createElement("label",{className:"feedback-form-radioLabel"},u.a.createElement("input",{type:"radio",name:"group1",value:i[0].entry[1].value,onChange:this.onChangeHandler,checked:!1===n}),i[0].entry[1].displayValue)),u.a.createElement("label",{className:"feedback-form-block",style:{order:i[1].order}},u.a.createElement("span",{className:"feedback-form-block__label"},"If yes, please provide your email:"),u.a.createElement("input",{className:"feedback-form-block__input ".concat(!t.valid&&t.dirty&&"feedback-form-block__input__error"),type:t.type,value:t.value,name:t.name,placeholder:t.placeholder,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,onFocus:this.onFocusHandler,disabled:!n}),!t.valid&&t.dirty&&u.a.createElement("span",{className:"errorSpan"},t.errorMessage)),u.a.createElement("fieldset",{className:"feedback-form-fieldset",style:{order:10}},u.a.createElement("div",{className:"feedback-form-text"},"Was this chat helpful?"),u.a.createElement("label",{className:"feedback-form-radioLabel"},u.a.createElement("input",{type:"radio",value:"Yes",onChange:this.onChangeHandler,name:"group2",checked:"Yes"===r}),"Yes"),u.a.createElement("label",{className:"feedback-form-radioLabel"},u.a.createElement("input",{type:"radio",value:"No",onChange:this.onChangeHandler,name:"group2",checked:"No"===r}),"No")),u.a.createElement("div",{className:"feedback-textarea-block",style:{order:20}},u.a.createElement("div",{className:"feedback-textarea-label"},"What can we do to make it better ?"),u.a.createElement("textarea",{name:"textarea",value:a,onChange:this.onChangeHandler,className:"feedback-textarea-field",placeholder:"Enter text here"},"Enter text here")),u.a.createElement("div",{className:"feedback-buttons",style:{order:30}},u.a.createElement("button",{onClick:this.closeChatWindow,className:"button feedback-button feedback-button__cancel"},"Cancel"),u.a.createElement("button",{onClick:this.handlerSubmit,className:"button feedback-button feedback-button__submit",disabled:n?n&&!l:n},"Submit"))))}}]),t}(c.Component);t.default=b}}]);
//# sourceMappingURL=3.babb3b27.chunk.js.map