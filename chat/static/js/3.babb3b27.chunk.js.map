{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","LiveChat/API/dataFromApi.js","LiveChat/Feedback/Feedback.jsx"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","__webpack_require__","d","__webpack_exports__","dataFromEtrieveChatEvents","retrieveExitSurveyStructure","events","link","@href","@rel","event","@id","@type","time","state","textType","text","by","systemMessageId","subType","survey","id","title","header","questions","question","type","validationType","logicId","order","mandatory","label","entry","checked","displayValue","lastKnownValue","validEmail","email","test","String","toLowerCase","Feedback","isFormValid","sendTranscript","name","placeholder","errorMessage","valid","dirty","isHelpful","textarea","onChangeHandler","e","_e$target","nextState","_home_atlana_WebstormProjects_LiveChat_2_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_this","setState","onBlurHandler","onFocusHandler","handlerSubmit","preventDefault","_this$state","dataFromFeedbackForm","message","console","log","setTimeout","props","closeChatWindow","getExitSurveyStructure","then","r","_this$state2","this","fieldData","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","onSubmit","style","onChange","onBlur","onFocus","disabled","onClick","Component"],"mappings":"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","file":"static/js/3.babb3b27.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export const dataFromEtrieveChatEvents = {\n  events: {\n    link: [\n      {\n        \"@href\":\n          \"https://{domain}/api/account/{accountId}/chat/{chatId}/events\",\n        \"@rel\": \"self\"\n      },\n      {\n        \"@href\":\n          \"https://{domain}/api/account/{accountId}/chat/{chatId}/events?from=5\",\n        \"@rel\": \"next\"\n      }\n    ],\n    event: [\n      {\n        \"@id\": \"0\",\n        \"@type\": \"state\",\n        time: \"2017-02-27T06:30:00.695-05:00\",\n        state: \"waiting\"\n      },\n      {\n        \"@id\": \"1\",\n        \"@type\": \"line\",\n        time: \"2017-02-27T06:30:00.696-05:00\",\n        textType: \"plain\",\n        text: \"Thank you for choosing to chat with us.\",\n        by: \"info\",\n        source: \"system\",\n        systemMessageId: \"4\",\n        subType: \"REGULAR\"\n      },\n      {\n        \"@id\": \"2\",\n        \"@type\": \"state\",\n        time: \"2017-02-27T06:30:25.502-05:00\",\n        state: \"chatting\"\n      },\n      {\n        \"@id\": \"3\",\n        \"@type\": \"line\",\n        time: \"2017-02-27T06:30:25.502-05:00\",\n        textType: \"plain\",\n        text: \"You are now chatting with Natalie.\",\n        by: \"info\",\n        source: \"system\",\n        systemMessageId: \"3\",\n        subType: \"REGULAR\"\n      },\n      {\n        \"@id\": \"4\",\n        \"@type\": \"line\",\n        time: \"2017-02-27T06:30:31.655-05:00\",\n        textType: \"html\",\n        text:\n          '<div dir=\"ltr\" style=\"direction: ltr; text-align: left;\">hi</div>',\n        by: \"Natalie\",\n        source: \"agent\",\n        subType: \"REGULAR\"\n      }\n    ]\n  }\n};\n\nexport const retrieveExitSurveyStructure = {\n  survey: {\n    id: 361348,\n    title: \"\",\n    header: \"\",\n    questions: {\n      question: [\n        {\n          type: \"Radio Button\",\n          validationType: \"alpha_numeric\",\n          id: 4991315,\n          logicId: 1,\n          order: 0,\n          mandatory: false,\n          label: \"Would you like us to email you a transcript of this chat?\",\n          entry: [\n            {\n              checked: false,\n              value: \"yes\",\n              displayValue: \"Yes\"\n            },\n            {\n              checked: false,\n              value: \"no\",\n              displayValue: \"No\"\n            }\n          ]\n        },\n        {\n          type: \"Text Field\",\n          validationType: \"email\",\n          id: 4991311,\n          logicId: 2,\n          order: 1,\n          mandatory: false,\n          label: \"If yes, please provide your email:\",\n          lastKnownValue: \"\"\n        }\n      ]\n    }\n  }\n};\n","import React, { Component } from \"react\";\nimport \"./Feedback.sass\";\nimport { retrieveExitSurveyStructure } from \"../API/dataFromApi\";\nimport { getExitSurveyStructure } from \"../API/API\";\n\nfunction validEmail(email) {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nclass Feedback extends Component {\n  state = {\n    retrieveExitSurveyStructure,\n    isFormValid: false,\n    sendTranscript: true,\n    email: {\n      value: \"\",\n      type: \"email\",\n      name: \"email\",\n      label: \"Email *\",\n      placeholder: \"Enter text here\",\n      errorMessage: \"Enter a valid email address. Format: you@domain.com\",\n      valid: false,\n      dirty: false\n    },\n    isHelpful: \"Yes\",\n    textarea: \"\"\n  };\n\n  componentDidMount() {\n    getExitSurveyStructure().then(r =>\n      console.log(\"getExitSurveyStructure\", r)\n    );\n  }\n\n  onChangeHandler = e => {\n    const { value, name } = e.target;\n    const nextState = { ...this.state };\n\n    switch (name) {\n      case \"group1\":\n        value ===\n        this.state.retrieveExitSurveyStructure.survey.questions.question[0]\n          .entry[0].value\n          ? (nextState.sendTranscript = true)\n          : (nextState.sendTranscript = false);\n        break;\n\n      case \"email\":\n        nextState.email.valid = validEmail(value);\n        nextState.email.dirty = value !== \"\" && true && validEmail(value);\n        nextState.email.value = value;\n        break;\n\n      case \"group2\":\n        nextState.isHelpful = value;\n        break;\n\n      case \"textarea\":\n        nextState.textarea = value;\n        break;\n\n      default:\n        break;\n    }\n\n    nextState.isFormValid = nextState.email.valid;\n\n    this.setState(() => nextState);\n  };\n\n  onBlurHandler = e => {\n    const nextState = { ...this.state };\n    nextState.email.dirty = true && e.target.value !== \"\";\n    this.setState(() => nextState);\n  };\n\n  onFocusHandler = e => {\n    const nextState = { ...this.state };\n    nextState.email.dirty = false;\n    this.setState(() => nextState);\n  };\n\n  handlerSubmit = e => {\n    e.preventDefault();\n    const { email, isHelpful, textarea } = this.state;\n\n    const dataFromFeedbackForm = {\n      email: email.value,\n      isHelpful: isHelpful,\n      message: textarea\n    };\n\n    console.log(\"dataFromFeedbackForm ---> \", dataFromFeedbackForm);\n\n    setTimeout(() => {\n      this.props.closeChatWindow();\n    }, 1500);\n  };\n\n  closeChatWindow = () => {\n    this.props.closeChatWindow();\n  };\n\n  render() {\n    const {\n      email,\n      textarea,\n      sendTranscript,\n      isHelpful,\n      isFormValid,\n      retrieveExitSurveyStructure\n    } = this.state;\n\n    const { survey } = retrieveExitSurveyStructure;\n    const fieldData = survey.questions.question;\n\n    return (\n      <div className=\"feedback\">\n        <div className=\"feedback-title\">\n          Thank you for interest in Viking Cruises.\n        </div>\n\n        <form onSubmit={this.handlerSubmit} className=\"feedback-form\">\n          <fieldset\n            className=\"feedback-form-fieldset\"\n            style={{ order: fieldData[0].order }}\n          >\n            <div className=\"feedback-form-text\">{fieldData[0].label}</div>\n            <label className=\"feedback-form-radioLabel\">\n              <input\n                type=\"radio\"\n                name=\"group1\"\n                value={fieldData[0].entry[0].value}\n                checked={sendTranscript === true}\n                onChange={this.onChangeHandler}\n              />\n              {fieldData[0].entry[0].displayValue}\n            </label>\n            <label className=\"feedback-form-radioLabel\">\n              <input\n                type=\"radio\"\n                name=\"group1\"\n                value={fieldData[0].entry[1].value}\n                onChange={this.onChangeHandler}\n                checked={sendTranscript === false}\n              />\n              {fieldData[0].entry[1].displayValue}\n            </label>\n          </fieldset>\n\n          <label\n            className=\"feedback-form-block\"\n            style={{ order: fieldData[1].order }}\n          >\n            <span className=\"feedback-form-block__label\">\n              If yes, please provide your email:\n            </span>\n            <input\n              className={`feedback-form-block__input ${!email.valid &&\n                email.dirty &&\n                \"feedback-form-block__input__error\"}`}\n              type={email.type}\n              value={email.value}\n              name={email.name}\n              placeholder={email.placeholder}\n              onChange={this.onChangeHandler}\n              onBlur={this.onBlurHandler}\n              onFocus={this.onFocusHandler}\n              disabled={sendTranscript ? false : true}\n            />\n            {!email.valid && email.dirty && (\n              <span className=\"errorSpan\">{email.errorMessage}</span>\n            )}\n          </label>\n\n          <fieldset className=\"feedback-form-fieldset\" style={{ order: 10 }}>\n            <div className=\"feedback-form-text\">Was this chat helpful?</div>\n            <label className=\"feedback-form-radioLabel\">\n              <input\n                type=\"radio\"\n                value=\"Yes\"\n                onChange={this.onChangeHandler}\n                name=\"group2\"\n                checked={isHelpful === \"Yes\"}\n              />\n              Yes\n            </label>\n            <label className=\"feedback-form-radioLabel\">\n              <input\n                type=\"radio\"\n                value=\"No\"\n                onChange={this.onChangeHandler}\n                name=\"group2\"\n                checked={isHelpful === \"No\"}\n              />\n              No\n            </label>\n          </fieldset>\n\n          <div className=\"feedback-textarea-block\" style={{ order: 20 }}>\n            <div className=\"feedback-textarea-label\">\n              What can we do to make it better ?\n            </div>\n            <textarea\n              name=\"textarea\"\n              value={textarea}\n              onChange={this.onChangeHandler}\n              className=\"feedback-textarea-field\"\n              placeholder=\"Enter text here\"\n            >\n              Enter text here\n            </textarea>\n          </div>\n\n          <div className=\"feedback-buttons\" style={{ order: 30 }}>\n            <button\n              onClick={this.closeChatWindow}\n              className=\"button feedback-button feedback-button__cancel\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={this.handlerSubmit}\n              className=\"button feedback-button feedback-button__submit\"\n              disabled={\n                sendTranscript ? sendTranscript && !isFormValid : sendTranscript\n              }\n            >\n              Submit\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Feedback;\n"],"sourceRoot":""}