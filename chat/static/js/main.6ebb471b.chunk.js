(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"d",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return f}),n.d(e,"f",function(){return m}),n.d(e,"h",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"i",function(){return S}),n.d(e,"e",function(){return b});var a=null,o=null,i={Authorization:"LivePerson appKey=721c180b09eb463d9f3191c41762bb68","Content-Type":"application/json",Accept:"application/json"},r=Object.freeze({getDomainApiCreateSession:i,postCreateSession:i,getDomainApi:i,postChatRequest:i,postVisitorAuthRequest:i,getAvailability:i,getAvailableSlots:i,getRetrieveEtimatedWaitTime:i,getPreChatSurvey:i,getRetrieveOfflineSUrvey:i,postOfflineSurvey:i,getChatEvents:i,getExitSurveyStructure:i}),c=Object.freeze({getDomainApiCreateSession:"http://api.liveperson.net/api/account/58135133/service/msdkgw/baseURI.json?version=1.0",get postCreateSession(){return"https://va.v.liveperson.net/api/account/58135133/app/engagement/visitors/?v=1.0"},getDomainApi:"http://api.liveperson.net/api/account/58135133/service/conversationVep/baseURI.json?version=1.0",get postChatRequest(){return"https://".concat(a,"/api/account/").concat(o,"/chat/request?v=1&NC=true")},get postVisitorAuthRequest(){return"https://".concat(a,"/api/account/").concat(o,"/conversation.json?v=1&NC=true")},get getAvailability(){return"https://".concat(a,"/api/account/").concat(o,"/chat/availability?v=1&NC=true")},get getAvailableSlots(){return"https://".concat(a,"/api/account/").concat(o,"/chat/availableSlots?v=1&NC=true")},get getRetrieveEtimatedWaitTime(){return"https://".concat(a,"/api/account/").concat(o,"/chat/estimatedWaitTime?v=1&NC=true")},get getPreChatSurvey(){return"https://".concat(a,"/api/account/").concat(o,"/chat//preSurvey?v=1&NC=true")},get getRetrieveOfflineSUrvey(){return"https://".concat(a,"/api/account/").concat(o,"/chat/offlineSurvey?v=1&NC=true")},get postOfflineSurvey(){return"https://".concat(a,"/api/account/").concat(o,"/chat/offlineSurvey?v=1&NC=true")},get getChatEvents(){return"https://".concat(a,"/api/account/").concat(o,"/chat/").concat("CHAT_ID","/events?v=1&NC=true")},get getExitSurveyStructure(){return"https://".concat(a,"/api/account/").concat(o,"/chat/").concat("CHAT_ID","/exitSurvey?v=1&NC=true")}}),s=Object.freeze({get:"GET",post:"POST",patch:"PATCH",put:"PUT",delete:"DELETE",options:"OPTIONS"}),u=function(t,e){a&&t(a),l({method:s.get,url:c.getDomainApi,headers:r.getDomainApi,body:{}}).then(function(t){return t},function(t){return t}).then(function(e){var n=JSON.parse(e.data);a=n.baseURI,o=n.account,console.log("getDomainApi ---\x3e ",e),t(a)})};function l(t){return new Promise(function(e,n){var a=new XMLHttpRequest;a.open(t.method||"GET",t.url),t.headers&&Object.keys(t.headers).forEach(function(e){a.setRequestHeader(e,t.headers[e])}),a.onload=function(){a.status>=200&&a.status<300?e({data:a.response,headers:a.getAllResponseHeaders().trim().split(/[\r\n]+/)}):n({data:a.response,headers:a.getAllResponseHeaders().trim().split(/[\r\n]+/)})},a.onerror=function(){return n(a.statusText)},a.send(t.body)})}var h=function(){return l({method:s.get,url:c.getDomainApiCreateSession,headers:r.getDomainApiCreateSession,body:{}}).then(function(t){return t},function(t){return t})},d=function(t){return l({method:s.post,url:c.postVisitorAuthRequest,headers:r.postVisitorAuthRequest,body:t}).then(function(t){return t},function(t){return t})},p=function(){return l({method:s.get,url:c.getAvailability,headers:r.getAvailability,body:{}}).then(function(t){return t},function(t){return t})},f=function(){return l({method:s.get,url:c.getAvailableSlots,headers:r.getAvailableSlots,body:{}}).then(function(t){return t},function(t){return t})},m=function(){return l({method:s.get,url:c.getPreChatSurvey,headers:r.getPreChatSurvey,body:{}}).then(function(t){return t},function(t){return t})},v=function(t){return l({method:s.post,url:c.postChatRequest,headers:r.postChatRequest,body:t})},g=function(){return l({method:s.get,url:c.getRetrieveOfflineSUrvey,headers:r.getRetrieveOfflineSUrvey,body:{}}).then(function(t){return t},function(t){return t})},S=function(t){return l({method:s.post,url:c.postChatRequest,headers:r.postChatRequest,body:t})},b=function(){return l({method:s.get,url:c.getExitSurveyStructure,headers:r.getExitSurveyStructure,body:{}}).then(function(t){return t},function(t){return t})}},,,,,,,,function(t,e,n){t.exports=n(18)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(8),r=n.n(i),c=(n(15),n(2)),s=n(3),u=n(5),l=n(4),h=n(6),d=(n(16),n(17),n(1)),p=Object.freeze({loginForm:"LoginForm",formOffline:"FormOffline",chatList:"ChatList",confirm:"Confirm",feedBack:"FeedBack"}),f={LoginForm:o.a.lazy(function(){return n.e(5).then(n.bind(null,28))}),FormOffline:o.a.lazy(function(){return n.e(4).then(n.bind(null,29))}),ChatList:o.a.lazy(function(){return n.e(6).then(n.bind(null,33))}),Confirm:o.a.lazy(function(){return n.e(8).then(n.bind(null,30))}),Sidecar:o.a.lazy(function(){return n.e(7).then(n.bind(null,31))}),Feedback:o.a.lazy(function(){return n.e(3).then(n.bind(null,32))})},m={appType:"EXTERNAL",appDetails:{os:"MAC_OSX",osVersion:"1.2",appVersion:"1.0",deviceFamily:"MOBILE",ipAddress:"192.168.5.2"},consumerSections:["Support","English","other"],engagementAttributes:[{type:"personal",personal:{contacts:[{email:"test.com",phone:"12345678"},{email:"test2.co.il",phone:"98765430"}],age:{age:30,year:1985,month:7,day:22},firstname:"test",lastname:"test2",gender:"FEMALE",company:"liveperson"}}]},v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).getAvailabilityAndSlots=function(){return new Promise(d.a).then(function(t){Object(d.b)().then(function(t){return JSON.parse(t.data).availability}).then(function(t){return Object(d.c)().then(function(e){console.log("getAvailableSlots ---\x3e ",e);var a=JSON.parse(e.data).availableSlots;n.setState({isAvailability:t||!1,availableSlots:a||0})})})})},n.chatRequest=function(){Object(d.f)().then(function(t){var e=JSON.parse(t.data);n.setState({preChatSurvey:e})})},n.minimazeChat=function(){n.setState({isOpenWindowChat:!1,SidecarWindow:!1})},n.openChatWindow=function(){n.setState({isOpenWindowChat:!0}),n.chatRequest()},n.closeChatWindow=function(){var t=n.state.currentWindow;t!==p.chatList?t!==p.feedBack&&t!==p.formOffline?n.setState({isOpenWindowChat:!1}):n.setState({currentWindow:p.loginForm,isOpenWindowChat:!1}):n.setState({currentWindow:p.confirm})},n.showFormOffline=function(){n.setState({currentWindow:p.formOffline})},n.closeConfirm=function(){n.setState({currentWindow:p.chatList})},n.toggleSidecarWindow=function(){n.setState({SidecarWindow:!n.state.SidecarWindow})},n.showChatList=function(){n.setState({currentWindow:p.chatList})},n.closeChatList=function(){n.setState({currentWindow:p.feedBack,SidecarWindow:!1})},n.onChatMouseDown=function(t){t.preventDefault(),n.chatElem||(n.chatElem=document.getElementById("chat")),document.addEventListener("mousemove",n.onChatMouseMove,!0),document.addEventListener("mouseup",n.onchatMouseUp,!0),n.startStateX=parseInt(n.chatElem.style.right)||0,n.startPosX=t.pageX},n.onChatMouseMove=function(t){if(n.chatElem){if(n.startStateX+(n.startPosX-t.pageX)<0)return void(n.chatElem.style.right=0);if(n.startStateX+(n.startPosX-t.pageX)>n.widthScreen-320)return void(n.chatElem.style.right=n.widthScreen-320);n.chatElem.style.right=n.startStateX+(n.startPosX-t.pageX)+"px"}},n.onchatMouseUp=function(t){document.removeEventListener("mousemove",n.onChatMouseMove,!0),document.removeEventListener("mouseup",n.onchatMouseUp,!0)},n.onchatMouseLeave=function(t){n.onchatMouseUp(t)},n.interval=null,n.chatElem=null,n.startPosX=0,n.startStateX=0,n.widthScreen=document.body.clientWidth,n.state={isOpenWindowChat:!1,currentWindow:p.loginForm,SidecarWindow:!1,isAgentOnline:!0,isAvailability:!1,availableSlots:0,preChatSurvey:null},n}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)().then(function(t){return console.log("getDomainApiCreateSession ---\x3e ",t),JSON.parse(t.data)}).then(function(t){var e=t.baseURI,n=t.account;fetch("https://".concat(e,"/api/account/").concat(n,"/app/engagement/visitors/?v=1.0"),{method:"post",headers:{Authorization:"LivePerson appKey=721c180b09eb463d9f3191c41762bb68","Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(m)}).then(function(t){console.log("postCreateSession ---\x3e ",t)})}),!this.state.isAvailability&&this.state.availableSlots<1&&(this.interval||(this.interval=setInterval(function(){t.getAvailabilityAndSlots()&&clearInterval(t.interval)},3e3)))}},{key:"renderCurrentWindow",value:function(t){switch(t){case p.loginForm:return this.state.preChatSurvey?o.a.createElement(f.LoginForm,{showChat:this.showChatList,cancel:this.closeChatWindow,isAgentOnline:this.state.isAgentOnline,preChatSurvey:this.state.preChatSurvey,showFormOffline:this.showFormOffline}):"loading";case p.formOffline:return o.a.createElement(f.FormOffline,{closeChatWindow:this.closeChatWindow});case p.chatList:return o.a.createElement(f.ChatList,{showSidecarWindow:this.toggleSidecarWindow});case p.confirm:return o.a.createElement(f.Confirm,{closeChat:this.closeChatList,closeConfirm:this.closeConfirm});case p.feedBack:return o.a.createElement(f.Feedback,{closeChatWindow:this.closeChatWindow});default:return null}}},{key:"render",value:function(){var t=this.state,e=t.isOpenWindowChat,n=t.currentWindow,i=t.SidecarWindow;return o.a.createElement(a.Suspense,{fallback:""},o.a.createElement("div",{className:"chat",id:"chat"},i&&o.a.createElement(f.Sidecar,{hideSidecarWindow:this.toggleSidecarWindow}),e&&o.a.createElement("div",{className:"chat__window"},o.a.createElement("div",{className:"chat__header",onMouseDown:this.onChatMouseDown},o.a.createElement("span",{className:"title"}),o.a.createElement("button",{className:"buttonMinimaze",onClick:this.minimazeChat}),o.a.createElement("button",{className:"buttonClose",onClick:this.closeChatWindow})),o.a.createElement("div",{className:"chat__body"},this.renderCurrentWindow(n)))),!e&&o.a.createElement("div",{className:"buttonShowChat__wrapper"},o.a.createElement("button",{onClick:this.openChatWindow,className:"button buttonShowChat"})))}}]),e}(a.Component),g=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,null))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.6ebb471b.chunk.js.map