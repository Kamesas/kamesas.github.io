{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","LiveChat/FormOffline/FormOffline.jsx"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","__webpack_require__","d","__webpack_exports__","FormOffline","state","paramsFromAPI","isFormValid","booking","name","type","placeholder","errorMessage","valid","dirty","phoneNumber","subject","message","onChangeHandler","e","str","_e$target","nextState","_home_atlana_WebstormProjects_LiveChat_2_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_this","match","setState","submitHandler","preventDefault","survey","fieldData","questions","question","formData","id","answer","skill","userAgent","window","navigator","console","log","postOfflineSurvey","JSON","stringify","then","r","parse","closeChatWindow","props","_this2","this","getRetrieveOfflineSUrvey","data","resolveData","_this$state","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","header","onSubmit","style","order","label","onChange","onClick","onSubmitForm","disabled","Component"],"mappings":"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","file":"static/js/4.ea5d3030.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import React, { Component } from \"react\";\nimport \"./FormOffline.sass\";\nimport { getRetrieveOfflineSUrvey, postOfflineSurvey } from \"../API/API\";\n\nfunction validphoneNumber(phoneNumber) {\n  //return phoneNumber.match(/[^\\D]/g);\n  return phoneNumber.match(/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\\s./0-9]*$/g);\n  // return phoneNumber.match(\n  //   /^[(]{0,1}[0-9]{3}[)]{0,1}[-\\s.]{0,1}[0-9]{3}[-\\s.]{0,1}[0-9]{4}$/\n  // );\n}\n\nfunction validName(str) {\n  return !str.match(/[^\\w\\s-']/gi) && !str.match(/[^\\D]/g);\n}\n\nclass FormOffline extends Component {\n  state = {\n    paramsFromAPI: null,\n    isFormValid: false,\n    booking: \"not booked\",\n    name: {\n      value: \"\",\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Enter text here\",\n      errorMessage: \"Complete the required field\",\n      valid: false,\n      dirty: false\n    },\n    phoneNumber: {\n      value: \"\",\n      type: \"text\",\n      name: \"phoneNumber\",\n      placeholder: \"Enter text here\",\n      errorMessage: \"Enter a valid phoneNumber address\",\n      valid: false,\n      dirty: false\n    },\n    subject: {\n      value: \"\",\n      type: \"text\",\n      name: \"subject\",\n      placeholder: \"Enter text here\"\n    },\n    message: {\n      value: \"\",\n      name: \"message\",\n      placeholder: \"Enter text here\"\n    }\n  };\n\n  componentDidMount() {\n    getRetrieveOfflineSUrvey().then(r => {\n      console.log(\"getRetrieveOfflineSUrvey ---> \", JSON.parse(r.data));\n      const resolveData = JSON.parse(r.data);\n      this.setState({ paramsFromAPI: resolveData });\n    });\n  }\n\n  onChangeHandler = e => {\n    const { value, name } = e.target;\n    const nextState = { ...this.state };\n\n    switch (name) {\n      case \"name\":\n        nextState.name.valid = validName(value);\n        nextState.name.dirty = true;\n        nextState.name.value = value;\n        break;\n      case \"phoneNumber\":\n        nextState.phoneNumber.valid = validphoneNumber(value);\n        nextState.phoneNumber.dirty = true;\n        nextState.phoneNumber.value = value;\n        break;\n      case \"subject\":\n        nextState.subject.value = value;\n        break;\n      case \"message\":\n        nextState.message.value = value;\n\n        break;\n\n      default:\n        break;\n    }\n\n    if (\n      nextState.phoneNumber.value !== \"\" &&\n      nextState.name.value !== \"\" &&\n      nextState.message.value !== \"\"\n    ) {\n      nextState.isFormValid =\n        nextState.phoneNumber.valid && nextState.name.valid;\n    } else {\n      nextState.isFormValid = false;\n    }\n\n    this.setState(() => nextState);\n  };\n\n  submitHandler = e => {\n    e.preventDefault();\n    const { survey } = this.state.paramsFromAPI;\n    const fieldData = survey.questions.question;\n\n    const formData = {\n      survey: {\n        id: survey.id,\n        question: [\n          {\n            id: fieldData[0].id,\n            answer: this.state.name.value\n          },\n          {\n            id: fieldData[1].id,\n            answer: this.state.phoneNumber.value\n          },\n          {\n            id: fieldData[2].id,\n            answer: this.state.subject.value\n          },\n          {\n            id: fieldData[3].id,\n            answer: this.state.message.value\n          }\n        ],\n        // LETagVisitorId: 'rloXnVgEQ-iQuoOytvKNqA',\n        // LETagSessionId: 'rN82d4rATN6EuiA4cJwaPg',\n        // LETagContextId: '5',\n        skill: \"All\",\n        userAgent: window.navigator.userAgent\n      }\n    };\n\n    console.log(\"postOfflineSurvey ---> \", formData);\n    postOfflineSurvey(JSON.stringify(formData)).then(r =>\n      console.log(\"postOfflineSurvey ---> \", JSON.parse(r))\n    );\n  };\n\n  closeChatWindow = () => {\n    this.props.closeChatWindow();\n  };\n\n  render() {\n    const {\n      name,\n      phoneNumber,\n      subject,\n      message,\n      isFormValid,\n      paramsFromAPI\n    } = this.state;\n\n    if (!this.state.paramsFromAPI) {\n      return \"loading\";\n    }\n\n    const { survey } = paramsFromAPI;\n    const fieldData = survey.questions.question;\n\n    return (\n      <div className=\"FormOffline-window\">\n        <div className=\"FormOffline-text\">{survey.header}</div>\n\n        <form onSubmit={this.submitHandler} className=\"FormOffline\">\n          <label\n            className=\"FormOffline-block\"\n            style={{ order: fieldData[0].order }}\n          >\n            <span className=\"FormOffline-block__label\">\n              {fieldData[0].label}*\n            </span>\n            <input\n              className={`FormOffline-block__input ${!name.valid &&\n                name.dirty &&\n                \"FormOffline-block__input__error\"}`}\n              type={name.type}\n              value={name.value}\n              name={name.name}\n              placeholder={name.placeholder}\n              onChange={this.onChangeHandler}\n            />\n            {!name.valid && name.dirty && (\n              <span className=\"FormOffline-block__errorMessage\">\n                {name.errorMessage}\n              </span>\n            )}\n          </label>\n\n          <label\n            className=\"FormOffline-block\"\n            style={{ order: fieldData[1].order }}\n          >\n            <span className=\"FormOffline-block__label\">\n              {fieldData[1].label}\n            </span>\n            <input\n              className={`FormOffline-block__input ${!phoneNumber.valid &&\n                phoneNumber.dirty &&\n                phoneNumber.value !== \"\" &&\n                \"FormOffline-block__input__error\"}`}\n              type={phoneNumber.type}\n              value={phoneNumber.value}\n              name={phoneNumber.name}\n              placeholder={phoneNumber.placeholder}\n              onChange={this.onChangeHandler}\n            />\n            {!phoneNumber.valid &&\n              phoneNumber.dirty &&\n              phoneNumber.value !== \"\" && (\n                <span className=\"FormOffline-block__errorMessage\">\n                  {phoneNumber.errorMessage}\n                </span>\n              )}\n          </label>\n\n          <label\n            className=\"FormOffline-block\"\n            style={{ order: fieldData[2].order }}\n          >\n            <span className=\"FormOffline-block__label\">\n              {fieldData[2].label}\n            </span>\n            <input\n              className={`FormOffline-block__input`}\n              type={subject.type}\n              value={subject.value}\n              name={subject.name}\n              placeholder={subject.placeholder}\n              onChange={this.onChangeHandler}\n            />\n          </label>\n\n          <label\n            className=\"FormOffline-block\"\n            style={{ order: fieldData[3].order }}\n          >\n            <span className=\"FormOffline-block__label\">\n              {fieldData[3].label}*\n            </span>\n            <textarea\n              name={message.name}\n              value={message.value}\n              className=\"textarea\"\n              placeholder={message.placeholder}\n              onChange={this.onChangeHandler}\n            />\n          </label>\n\n          <div className=\"FormOffline-buttons\" style={{ order: 20 }}>\n            <button\n              onClick={this.closeChatWindow}\n              className=\"FormOffline-button FormOffline-button__cancel\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={this.onSubmitForm}\n              disabled={!isFormValid}\n              className=\"FormOffline-button FormOffline-button__start\"\n            >\n              Start\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default FormOffline;\n"],"sourceRoot":""}